# DirectoryX - 目录化工具

DirectoryX 是一个基于Web的实用工具，旨在帮助您可视化目录结构、管理文件内容，并以适用于多种目的（特别是为大型语言模型 (LLM) 提供上下文）的格式导出所选内容。它对导出的内容和处理方式提供了细致的控制。

## 主要功能

*   **目录导入**:
    *   使用文件系统访问 API 导入本地项目目录 (需要在兼容的浏览器如 Chrome/Edge 的安全上下文中运行)。
    *   如果 API 不可用或用户取消，则加载一个示例项目，方便您体验各项功能。
*   **交互式文件树**:
    *   可视化项目的文件和文件夹结构。
    *   展开/折叠文件夹。
    *   搜索文件和文件夹 (快捷键 `Ctrl+F` 查找文件, `Ctrl+Shift+F` 查找文件夹)。
*   **文件选择**:
    *   单独选择要导出的文件。
    *   文件夹的批量选择选项 (全选、全不选、反选文件夹内的文件)。
*   **内容管理与覆盖**:
    *   **文件/文件夹属性**: 添加自定义描述。
    *   **文件特定覆盖**:
        *   **行数限制**: 覆盖规则集定义的行数限制 (例如，仅保留头部N行、尾部N行、特定范围或无行)。
        *   **压缩**: 覆盖规则集定义的压缩方式 (例如，去除空行、去除注释)。
*   **匹配库**:
    *   创建和管理可复用的“匹配项”，用于根据以下条件识别文件或文件夹：
        *   **名称**: 完全或部分名称匹配。
        *   **后缀**: 针对文件 (例如 `.txt`, `.js`)。
        *   **通配符**: 类 Glob 模式 (例如 `*.log`, `src/*/*.ts`)。
        *   **正则表达式**: 用于复杂的模式匹配。
*   **规则集**:
    *   将规则组织成具有优先级的集合，用于不同的处理阶段。
    *   **导入规则集**: 根据匹配项定义初始导入或排除哪些文件和文件夹 (例如，排除 `node_modules`, `.git`)。
    *   **压缩规则集**: 对符合特定条件的文件应用内容压缩 (去除空行、基本注释移除)。
    *   **行数限制规则集**: 控制导出文件包含的行数 (例如，头部N行、尾部N行、自定义范围，或对二进制文件不保留行) ，适用于符合特定条件的文件。
*   **宏操作**:
    *   **操作**: 定义基于先前定义的匹配项的特定动作，如“勾选文件”、“取消勾选文件”、“全选文件夹内文件”、“全不选文件夹内文件”或“反选文件夹内文件”。
    *   **宏**: 创建这些操作的序列，以自动化常见的选择或取消选择任务。宏可以在“文件”视图中运行。
*   **导出选项**:
    *   **合并导出选中的文件**: 将所有选定文件的内容（应用选择的压缩和行数限制规则后）合并到单个文本文件中。
    *   **导出目录树**: 导出一个表示目录结构的文本文件 (可选择显示已选中的文件)。
*   **撤销/重做**:
    *   撤销/重做对文件选择和属性的更改 (快捷键 `Ctrl+Z` / `Ctrl+Y`)。
    *   撤销/重做宏的执行。
*   **用户界面**:
    *   文件、匹配库、规则集、宏操作的标签页导航。
    *   用于创建/编辑项目的模态框。
    *   用于提供指导的工具提示。

## 如何使用

1.  **导航至 “文件” 视图。** 这是默认打开的视图。
2.  **导入目录**: 点击 “导入目录” 按钮。
    *   如果您的浏览器支持，将弹出一个对话框，请求访问您系统上文件夹的权限。
    *   如果不支持或您取消了操作，则会加载一个示例项目以演示功能。
3.  **管理规则集 (可选但推荐)**:
    *   前往 **“规则集”** 视图。
    *   从顶部下拉菜单中选择一个规则集类型 (导入、压缩、行数限制)。
    *   查看默认规则集或通过点击“创建规则集”来创建新的规则集。
    *   规则集中的规则按优先级应用 (数字越小，优先级越高)。您可以调整优先级以及启用/禁用规则。
    *   要创建规则，请使用左侧的“规则库”面板。点击“创建规则”并定义其属性，包括它所使用的“匹配项”。
    *   **匹配库**: 您可能首先需要访问 **“匹配库”** 视图来定义可复用的“匹配项” (例如，“所有JS文件”，“node_modules文件夹”)，您的规则将会用到这些匹配项。
    *   返回 **“文件”** 视图，在顶部栏的下拉菜单中为导入、压缩和行数限制选择所需的活动规则集。导入规则集在目录导入过程中应用。压缩和行数限制规则集在导出时应用。
4.  **选择要导出的文件**:
    *   在 **“文件”** 视图中，手动勾选要包含的文件旁边的复选框。
    *   使用文件夹操作 (全选/不选/反选) 对文件夹内的文件进行批量操作。
5.  **使用宏 (可选)**:
    *   前往 **“宏操作”** 视图。
    *   首先定义 **操作** (例如，“选择所有Python文件”)。操作会使用“匹配库”中的匹配项。
    *   然后，将多个操作组合成 **宏** (例如，“选择所有源代码”)。
    *   在 **“文件”** 视图的右侧“宏操作”面板中，通过点击播放图标来运行您的宏。
6.  **调整文件属性 (可选)**:
    *   在 **“文件”** 视图中，点击任何文件或文件夹旁边的属性图标 (齿轮图标)。
    *   添加描述覆盖 (此描述将在合并导出时作为注释添加到文件内容的顶部)。
    *   对于文件，可以设置特定的行数限制或压缩覆盖，这将优先于该特定文件的规则集配置。
7.  **导出**:
    *   在 **“文件”** 视图中，点击 “导出 ▼” 按钮。
    *   选择一个导出选项：
        *   `合并导出选中的文件`: 导出一个单一的文本文件。
        *   `分开导出选中的文件`: 目前功能简化；完整功能需要ZIP打包。
        *   `导出目录树`: 导出一个表示文件夹结构的文本。

## 项目目的

DirectoryX 旨在简化为大型语言模型或其他工具准备和打包项目代码、文档或任何基于文本的文件结构的过程。它使您可以控制：
*   初始考虑哪些内容 (通过导入规则)。
*   如何清理或减少内容 (通过压缩和行数限制规则/覆盖)。
*   如何高效地进行选择 (通过手动选择和宏)。
*   导出数据的最终格式。

## 许可证

本项目根据 [MIT 许可证](LICENSE) 发布。
